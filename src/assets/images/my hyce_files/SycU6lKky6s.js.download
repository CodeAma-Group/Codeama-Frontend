if (self.CavalryLogger) { CavalryLogger.start_js(["QdfvqIu"]); }

__d("LiveProducerLiveVideoCreateMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{kind:"Variable",name:"data",variableName:"input"}],c={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null},f={alias:null,args:[{kind:"Literal",name:"ssl_behavior",value:"USE_SSL"}],kind:"ScalarField",name:"rtmp_ingest_url",storageKey:'rtmp_ingest_url(ssl_behavior:"USE_SSL")'},g={alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"title",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null};return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LiveProducerLiveVideoCreateMutation",selections:[{alias:null,args:b,concreteType:"LiveVideoCreateResponsePayload",kind:"LinkedField",name:"live_video_create",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[c,d,e,{alias:null,args:null,concreteType:"LiveVideoInputStreamsConnection",kind:"LinkedField",name:"input_streams",plural:!1,selections:[{alias:null,args:null,concreteType:"LiveVideoInputStream",kind:"LinkedField",name:"nodes",plural:!0,selections:[f],storageKey:null}],storageKey:null},g,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_target_entity",plural:!1,selections:[h],storageKey:null}],storageKey:null}],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LiveProducerLiveVideoCreateMutation",selections:[{alias:null,args:b,concreteType:"LiveVideoCreateResponsePayload",kind:"LinkedField",name:"live_video_create",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[c,d,e,{alias:null,args:null,concreteType:"LiveVideoInputStreamsConnection",kind:"LinkedField",name:"input_streams",plural:!1,selections:[{alias:null,args:null,concreteType:"LiveVideoInputStream",kind:"LinkedField",name:"nodes",plural:!0,selections:[f,c],storageKey:null}],storageKey:null},g,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"video_target_entity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},h,c],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:"3774264439362032",metadata:{},name:"LiveProducerLiveVideoCreateMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("LiveProducerLiveVideoCreateRehearsalMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"LiveVideoCreateResponsePayload",kind:"LinkedField",name:"live_video_create",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LiveProducerLiveVideoCreateRehearsalMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LiveProducerLiveVideoCreateRehearsalMutation",selections:b},params:{id:"4249011195132784",metadata:{},name:"LiveProducerLiveVideoCreateRehearsalMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("LiveProducerLiveVideoCreateSphericalMutation.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],b=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"LiveVideoCreateResponsePayload",kind:"LinkedField",name:"live_video_create",plural:!1,selections:[{alias:null,args:null,concreteType:"Video",kind:"LinkedField",name:"video",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"broadcast_status",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"LiveProducerLiveVideoCreateSphericalMutation",selections:b,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"LiveProducerLiveVideoCreateSphericalMutation",selections:b},params:{id:"3987924097932838",metadata:{},name:"LiveProducerLiveVideoCreateSphericalMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("LiveProducerRootContext",["LiveProducerConstants","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b={contextType:d("LiveProducerConstants").LIVE_PRODUCER_CONTEXT_TYPES.DEFAULT,entryPoint:null,loeOptIn:!0,loeOptInPerSession:!0,setLoeOptIn:c("emptyFunction"),targetID:null,targetType:null,videoID:null};e=a.createContext(b);g["default"]=e}),98);
__d("LiveProducerSourceContext",["LiveProducerConstants","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";a=d("react");b=a.createContext({currentInputSource:d("LiveProducerConstants").LIVE_PRODUCER_SOURCE_TYPES.STREAM_KEYS,hasPairedEncoder:!1,setCurrentInputSource:c("emptyFunction")});g["default"]=b}),98);
__d("getLiveVideoCreateMutationAudience",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.targetID==null?a.privacyData!=null?{privacy:{allow:a.privacyData.allow,base_state:a.privacyData.base_state,deny:a.privacyData.deny,privacy_targeting:a.privacyData.privacy_targeting,tag_expansion_state:a.privacyData.tag_expansion_state}}:{privacy:{base_state:"SELF"}}:{to_id:a.targetID}}f["default"]=a}),66);
__d("LiveProducerLiveVideoCreateMutation",["CometRelay","LiveProducerConstants","LiveProducerLiveVideoCreateMutation.graphql","Promise","getLiveVideoCreateMutationAudience"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("LiveProducerLiveVideoCreateMutation.graphql");function a(a,e,f,g){var h=c("getLiveVideoCreateMutationAudience")(f),j={audience:h,broadcast_infra_type:a,composer_creation_source:f.composerCreationSource,live_online_event_ids:f.liveOnlineEventIDs,num_hosts:(h=f.numHosts)!=null?h:1,override_app_id:String(f.overrideAppID),set_story_share_surface_if_eligible:g,should_attach_live_online_event_optimistically:f.shouldAttachLiveOnlineEventOptimistically,use_psk_if_enabled:!1,video_broadcast_initial_status:d("LiveProducerConstants").VideoBroadcastStatus.PREVIEW};f.title!==void 0&&(j.title=f.title);return new(b("Promise"))(function(a,b){d("CometRelay").commitMutation(e,{mutation:i,onCompleted:function(c,d){if(d!=null){b(d);return}a(c)},onError:b,variables:{input:j}})})}g.commit=a}),98);
__d("LiveProducerLiveVideoCreateRehearsalMutation",["CometRelay","LiveProducerConstants","LiveProducerLiveVideoCreateRehearsalMutation.graphql","Promise","getLiveVideoCreateMutationAudience","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("LiveProducerLiveVideoCreateRehearsalMutation.graphql");function a(a,e){var f=c("gkx")("1939345")?{privacy:{base_state:"SELF"}}:c("getLiveVideoCreateMutationAudience")(e);return new(b("Promise"))(function(b,c){var g;d("CometRelay").commitMutation(a,{mutation:i,onCompleted:function(a,d){if(d!=null){c(d);return}b(a)},onError:c,variables:{input:{audience:f,broadcast_infra_type:"RTMP",is_rehearsal_broadcast:!0,live_online_event_ids:e.liveOnlineEventIDs,num_hosts:(g=e.numHosts)!=null?g:1,override_app_id:String(e.overrideAppID),should_attach_live_online_event_optimistically:!1,use_psk_if_enabled:!1,video_broadcast_initial_status:d("LiveProducerConstants").VideoBroadcastStatus.PREVIEW}}})})}g.commit=a}),98);
__d("LiveProducerLiveVideoCreateSphericalMutation",["CometRelay","LiveProducerConstants","LiveProducerLiveVideoCreateSphericalMutation.graphql","Promise","getLiveVideoCreateMutationAudience"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h!==void 0?h:h=b("LiveProducerLiveVideoCreateSphericalMutation.graphql");function a(a,e){var f=c("getLiveVideoCreateMutationAudience")(e);return new(b("Promise"))(function(b,c){var g;d("CometRelay").commitMutation(a,{mutation:i,onCompleted:function(a,d){if(d!=null){c(d);return}b(a)},onError:c,variables:{input:{audience:f,broadcast_infra_type:"RTMP",live_360_settings:{projection:(g=e.sphericalVideoProjection)!=null?g:void 0,spatial_audio_format:(g=e.sphericalVideoSpatialAudioFormat)!=null?g:void 0,stereo_format:(g=e.sphericalVideoStereoFormat)!=null?g:void 0,stream_format:"VIDEO"},num_hosts:(g=e.numHosts)!=null?g:1,override_app_id:String(e.overrideAppID),use_psk_if_enabled:!1,video_broadcast_initial_status:d("LiveProducerConstants").VideoBroadcastStatus.PREVIEW}}})})}g.commit=a}),98);
__d("useCheckIsContextType",["LiveProducerRootContext","react"],(function(a,b,c,d,e,f,g){"use strict";b=d("react");var h=b.useCallback,i=b.useContext;function a(){var a=i(c("LiveProducerRootContext")),b=a.contextType;a=h(function(a){return a.includes(b)},[b]);return a}g["default"]=a}),98);
__d("coerceJSEnum",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){if(!Object.prototype.hasOwnProperty.call(a,b))return null;b=b;return a[b]}f["default"]=a}),66);
__d("useCreateBroadcast",["Actor","CometRelay","CometRouteParams","LiveProducerConstants","LiveProducerContext","LiveProducerInputSource","LiveProducerLiveVideoCreateMutation","LiveProducerLiveVideoCreateRehearsalMutation","LiveProducerLiveVideoCreateSphericalMutation","LiveProducerLoggerContext","LiveProducerSourceContext","Promise","coerceJSEnum","err","gkx","react","recoverableViolation","useCheckIsContextType"],(function(a,b,c,d,e,f,g){"use strict";e=d("react");var h=e.useCallback,i=e.useContext,j={overrideAppID:d("LiveProducerConstants").LIVE_VIDEO_WWW_API_BROADCASTING_APP_ID};function k(a){a=c("coerceJSEnum")(c("LiveProducerInputSource"),a);var b=a==null?null:d("LiveProducerConstants").LIVE_PRODUCER_INPUT_SOURCE_TO_INFRA_TYPE_MAP[a];if(b==null){a!=null&&c("recoverableViolation")("source URL parameter does not correspond to any infra type, using default RTMP","live_producer");return"RTMP"}return b}function a(a){var e=d("CometRelay").useRelayEnvironment(),f=d("Actor").useActor(),g=f[0];f=i(c("LiveProducerLoggerContext"));var l=f.loggerOverrideContextData;f=i(c("LiveProducerSourceContext"));var m=f.currentInputSource;f=i(c("LiveProducerContext"));f=f.videoData;var n=f.targetID,o=f.targetType,p=c("gkx")("733")===!0,q=h(function(b,c){var d=l({actorID:g});(a==null?void 0:a.createRehearsal)===!0?d.logEnableRehearsalFailed(b):(a==null?void 0:a.createSpherical)===!0?d.logEnableSphericalFailed(b):d.logCreateBroadcastFailed(b,{entryPoint:a==null?void 0:a.entryPoint,infraType:c,inputSource:m})},[g,m,l,a==null?void 0:a.createRehearsal,a==null?void 0:a.createSpherical,a==null?void 0:a.entryPoint]),r=h(function(b,c,d){c=l({actorID:g,broadcastID:c,id:b});c.logCreateBroadcast({entryPoint:a==null?void 0:a.entryPoint,infraType:d,inputSource:m})},[g,m,l,a==null?void 0:a.entryPoint]),s=c("useCheckIsContextType")()([d("LiveProducerConstants").LIVE_PRODUCER_CONTEXT_TYPES.WORKPLACE]);f=d("CometRouteParams").useRouteParams();var t=f.source;f=h(function(c,f){l({actorID:g}).logCreateBroadcastRequested();return new(b("Promise"))(function(b,g){var h;d("LiveProducerLiveVideoCreateMutation").commit(k((h=t)!=null?h:a==null?void 0:a.source),(h=c)!=null?h:e,(h=f)!=null?h:j,p).then(function(a){var c;c=a==null?void 0:(c=a.live_video_create)==null?void 0:(c=c.video)==null?void 0:c.id;a=a==null?void 0:(a=a.live_video_create)==null?void 0:(a=a.video)==null?void 0:a.broadcast_id;if(c==null||a==null){var d=new Error("Missing id on broadcast creation");q(d,k(t));g(d)}else r(c,a,k(t)),b(c)})["catch"](function(a){q(a,k(t)),g(a)})})},[g,q,r,l,e,t,p]);var u=h(function(a,c){l({actorID:g}).logCreateBroadcastRequested();return a==null||c==null?new(b("Promise"))(function(a,b){a=new Error("Attempt to create rehearsal with null environment or input");q(a);b(a)}):new(b("Promise"))(function(b,e){d("LiveProducerLiveVideoCreateRehearsalMutation").commit(a,c).then(function(a){var c;c=a==null?void 0:(c=a.live_video_create)==null?void 0:(c=c.video)==null?void 0:c.id;a=a==null?void 0:(a=a.live_video_create)==null?void 0:(a=a.video)==null?void 0:a.broadcast_id;if(c==null||a==null){var d=new Error("Missing id on broadcast creation");q(d);e(d)}else r(c,a),b(c)})["catch"](function(a){q(a),e(a)})})},[g,q,r,l]),v=h(function(a,e){l({actorID:g}).logCreateBroadcastRequested();if(a==null||e==null)return new(b("Promise"))(function(a,b){a=c("err")("Attempt to create spherical broadcast with null environment or input");q(a);b(a)});s&&n!=null&&o!==d("LiveProducerConstants").VideoTargetEntityType.PERSON&&(e.targetID=n);return new(b("Promise"))(function(b,f){d("LiveProducerLiveVideoCreateSphericalMutation").commit(a,e).then(function(a){var d;d=a==null?void 0:(d=a.live_video_create)==null?void 0:(d=d.video)==null?void 0:d.id;a=a==null?void 0:(a=a.live_video_create)==null?void 0:(a=a.video)==null?void 0:a.broadcast_id;if(d==null||a==null){var e=c("err")("Missing id on broadcast creation");q(e);f(e)}else r(d,a),b(d)})["catch"](function(a){q(a),f(a)})})},[g,s,q,r,l,n,o]);if((a==null?void 0:a.createRehearsal)===!0)return u;return(a==null?void 0:a.createSpherical)===!0?v:f}g["default"]=a}),98);