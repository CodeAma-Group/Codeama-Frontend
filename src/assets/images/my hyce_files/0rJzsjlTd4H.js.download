if (self.CavalryLogger) { CavalryLogger.start_js(["ColOIap"]); }

__d("CometUFIVoteCommentActionLink_comment$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"CometUFIVoteCommentActionLink_comment$normalization",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["CometCommentVoteActionLinkReputationSystemStrategy","CometCommentVoteActionLinkReputationSystemQnAOnlyStrategy","CometCommentVoteActionLinkLegacyStrategy"]}],concreteType:null,kind:"LinkedField",name:"comet_comment_vote_action_link_strategy",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFIVoteCommentActionLink_comment",fragmentName:"CometUFICommentReputationSystemVoteActionLinkStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometCommentVoteActionLinkReputationSystemStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFIVoteCommentActionLink_comment",fragmentName:"CometUFICommentReputationSystemVoteActionLinkQnAOnlyStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometCommentVoteActionLinkReputationSystemQnAOnlyStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFIVoteCommentActionLink_comment",fragmentName:"CometUFIVoteCommentActionLinkLegacyStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometCommentVoteActionLinkLegacyStrategy",abstractKey:null}],storageKey:'comet_comment_vote_action_link_strategy(supported:["CometCommentVoteActionLinkReputationSystemStrategy","CometCommentVoteActionLinkReputationSystemQnAOnlyStrategy","CometCommentVoteActionLinkLegacyStrategy"])'}]};e.exports=a}),null);
__d("CometUFIVoteCommentActionLink_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFIVoteCommentActionLink_comment",selections:[{alias:null,args:[{kind:"Literal",name:"supported",value:["CometCommentVoteActionLinkReputationSystemStrategy","CometCommentVoteActionLinkReputationSystemQnAOnlyStrategy","CometCommentVoteActionLinkLegacyStrategy"]}],concreteType:null,kind:"LinkedField",name:"comet_comment_vote_action_link_strategy",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFIVoteCommentActionLink_comment",fragmentName:"CometUFICommentReputationSystemVoteActionLinkStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometCommentVoteActionLinkReputationSystemStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFIVoteCommentActionLink_comment",fragmentName:"CometUFICommentReputationSystemVoteActionLinkQnAOnlyStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometCommentVoteActionLinkReputationSystemQnAOnlyStrategy",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"CometUFIVoteCommentActionLink_comment",fragmentName:"CometUFIVoteCommentActionLinkLegacyStrategy_strategy",fragmentPropName:"strategy",kind:"ModuleImport"}],type:"CometCommentVoteActionLinkLegacyStrategy",abstractKey:null}],storageKey:'comet_comment_vote_action_link_strategy(supported:["CometCommentVoteActionLinkReputationSystemStrategy","CometCommentVoteActionLinkReputationSystemQnAOnlyStrategy","CometCommentVoteActionLinkLegacyStrategy"])'}],type:"Comment",abstractKey:null};e.exports=a}),null);
__d("CometUFICommentReputationSystemPopoverQuery$Parameters",[],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:"3817423801670228",metadata:{},name:"CometUFICommentReputationSystemPopoverQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("CometUFICommentReputationSystemVoteActionLinkStrategy_strategy$normalization.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{kind:"SplitOperation",metadata:{},name:"CometUFICommentReputationSystemVoteActionLinkStrategy_strategy$normalization",selections:[{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment",plural:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comment_voting_state",storageKey:null},a],storageKey:null},a],storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"upvote_downvote_total",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"viewer_comment_vote_state",storageKey:null}],storageKey:null}]}}();e.exports=a}),null);
__d("CometUFICommentReputationSystemVoteActionLinkStrategy_strategy.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFICommentReputationSystemVoteActionLinkStrategy_strategy",selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Comment",kind:"LinkedField",name:"comment",plural:!1,selections:[{alias:null,args:null,concreteType:"Feedback",kind:"LinkedField",name:"feedback",plural:!1,selections:[{alias:null,args:null,concreteType:"Group",kind:"LinkedField",name:"associated_group",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"comment_voting_state",storageKey:null}],storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"CometUFICommentReputationSystemVoteActionLink_comment"}],storageKey:null},action:"THROW",path:"comment"}],type:"CometCommentVoteActionLinkReputationSystemStrategy",abstractKey:null};e.exports=a}),null);
__d("CometUFICommentReputationSystemVoteActionLink_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CometUFICommentReputationSystemVoteActionLink_comment",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},action:"THROW",path:"id"},{alias:null,args:null,kind:"ScalarField",name:"upvote_downvote_total",storageKey:null},{args:null,kind:"FragmentSpread",name:"useCometUFICommentReputationSystemViewerVoteState_comment"}],type:"Comment",abstractKey:null};e.exports=a}),null);
__d("useCometUFICommentReputationSystemViewerVoteState_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometUFICommentReputationSystemViewerVoteState_comment",selections:[{alias:null,args:null,kind:"ScalarField",name:"viewer_comment_vote_state",storageKey:null}],type:"Comment",abstractKey:null};e.exports=a}),null);
__d("CometUFIVoteCommentActionLink.react",["CometRelay","CometUFIVoteCommentActionLink_comment.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){var c=a.comment,e=a.feedLocation,f=a.isOptimistic;a=a.wrapperRenderStrategy;c=d("CometRelay").useFragment(h!==void 0?h:h=b("CometUFIVoteCommentActionLink_comment.graphql"),c);c=c.comet_comment_vote_action_link_strategy;if(c==null)return a(null);else return i.jsx(d("CometRelay").MatchContainer,{match:c,props:{feedLocation:e,isOptimistic:f,wrapperRenderStrategy:a}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFICommentReputationSystemPopover.entrypoint",["CometUFICommentReputationSystemPopoverQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.commentID;return{queries:{dialogQuery:{parameters:c("CometUFICommentReputationSystemPopoverQuery$Parameters"),variables:{commentID:a}}}}},root:c("JSResourceForInteraction")("CometUFICommentReputationSystemPopover.react").__setRef("CometUFICommentReputationSystemPopover.entrypoint")};g["default"]=a}),98);
__d("useCometCommentReputationSystemDeferredLogEventCallback",["react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useCallback,i=c("requireDeferred")("CometUFICommentReputationSystemLoggerHelper").__setRef("useCometCommentReputationSystemDeferredLogEventCallback");function a(a){var b=a.commentID,c=a.entrypoint,d=a.existingVoteStateFromGQL,e=a.selectedValueFromGQL;return h(function(a){return i.onReady(function(f){f=f.log;f({commentID:b,entrypoint:c,event:a,existingVoteStateFromGQL:d,selectedValueFromGQL:e})})},[b,c,d,e])}g["default"]=a}),98);
__d("CommentVoteReactionType.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["DOWNVOTE","NONE","UPVOTE"]);c=a;f["default"]=c}),66);
__d("useCometUFICommentReputationSystemViewerVoteState",["RelayHooks","useCometUFICommentReputationSystemViewerVoteState_comment.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("RelayHooks").useFragment(h!==void 0?h:h=b("useCometUFICommentReputationSystemViewerVoteState_comment.graphql"),a);a=(a=a.viewer_comment_vote_state)!=null?a:"NONE";return{viewerHasDownvoted:a==="DOWNVOTE",viewerHasUpvoted:a==="UPVOTE",viewerVoteState:a}}g["default"]=a}),98);
__d("useLogWhenUFIFirstVisible",["react","useVisibilityObserver"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useRef;function a(a,b){var d=h(!1),e=function(){if(d.current)return;d.current=!0;a(b)};return c("useVisibilityObserver")({onVisible:e})}g["default"]=a}),98);
__d("useOnBuildCommentReputationSystemVoteMutation",["react"],(function(a,b,c,d,e,f,g){"use strict";var h=d("react").useRef;function a(){var a=h(null);return function(b){var c;(c=a.current)==null?void 0:c.dispose();a.current=b()}}g["default"]=a}),98);
__d("CometUFICommentReputationSystemVoteActionLink.react",["fbt","ix","CometEntryPointPopoverTrigger.react","CometPopoverLoadingState.react","CometPressable.react","CometRelay","CometUFICommentReputationSystemPopover.entrypoint","CometUFICommentReputationSystemVoteActionLink_comment.graphql","TetraIcon.react","fbicon","intlSummarizeNumber","mergeRefs","react","stylex","useCometCommentReputationSystemDeferredLogEventCallback","useCometUFICommentReputationSystemViewerVoteState","useLogWhenUFIFirstVisible","useOnBuildCommentReputationSystemVoteMutation"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=d("react");e=d("react");var l=e.useCallback,m=e.useRef,n=e.useState,o={button:{marginTop:"hop8lmos",marginEnd:"nkwizq5d",marginBottom:"scwd0bx6",marginStart:"roh60bw9",paddingTop:"jwdofwj8",paddingEnd:"n8tt0mok",paddingBottom:"r8blr3vg",paddingStart:"hyh9befq",verticalAlign:"j1lvzwm4"},fallbackPopover:{minHeight:"sllwwmpm",minWidth:"nnvw5wor"},icon:{verticalAlign:"j1lvzwm4"},score:{fontWeight:"lrazzd5p",marginEnd:"kady6ibp",marginStart:"kkf49tns"},scoreNeutral:{color:"m9osqain"},scoreVoted:{color:"knomaqxo"}};function a(a){var e=a.comment;a=a.disabled;var f=a===void 0?!1:a;a=d("CometRelay").useFragment(j!==void 0?j:j=b("CometUFICommentReputationSystemVoteActionLink_comment.graphql"),e);e=a.id;var g=a.upvote_downvote_total;a=c("useCometUFICommentReputationSystemViewerVoteState")(a);var i=a.viewerHasDownvoted,l=a.viewerHasUpvoted;a=a.viewerVoteState;var m=c("useCometCommentReputationSystemDeferredLogEventCallback")({commentID:e,existingVoteStateFromGQL:a}),n=c("useLogWhenUFIFirstVisible")(m,"first_view_icon_on_ufi");a=c("useOnBuildCommentReputationSystemVoteMutation")();var s=p(m),t=s.isPopoverVisible,u=s.onPopoverVisibilityChange;s=s.onValueSheetVisibilityStateChange;return k.jsx(c("CometEntryPointPopoverTrigger.react"),{align:"start",entryPointParams:{commentID:e},fallback:k.jsx(c("CometPopoverLoadingState.react"),{withArrow:!0,xstyle:o.fallbackPopover}),onVisibilityChange:u,otherProps:{isPopoverVisible:t,onBuildVoteMutation:a,onValueSheetVisibilityStateChange:s},popoverEntryPoint:c("CometUFICommentReputationSystemPopover.entrypoint"),popoverType:"dialog",position:"below",preloadTrigger:"button",tracePolicy:"comet.feed.story.ufi.comment.reputationsystem",children:function(a,b,d,e,j,p){d=function(){m("click_icon_on_ufi"),b()};return k.jsxs(c("CometPressable.react"),{"aria-label":h._("Vote on this comment"),disabled:f,onHoverIn:e,onHoverOut:j,onPress:d,onPressIn:p,overlayRadius:4,ref:c("mergeRefs")(a,n),role:"button",testid:void 0,xstyle:o.button,children:[k.jsx(r,{asDownvote:i,asUpvote:l,disabled:f}),k.jsx(q,{disabled:f,viewerHasDownvoted:i,viewerHasUpvoted:l,voteScoreRaw:g})]})}})}a.displayName=a.name+" [from "+f.id+"]";function p(a){var b=n(!1),c=b[0],d=b[1],e=m(!1),f=l(function(){e.current=!1},[]);b=l(function(b){b?e.current||(e.current=!0,a("view_value_sheet")):e.current&&(f(),a("dismiss_value_sheet"))},[a,f]);var g=function(b){var g=e.current;b!==c&&a(b?g?"view_value_sheet":"view_bottom_sheet":g?"dismiss_value_sheet":"dismiss_bottom_sheet");b||f();d(b)};return{isPopoverVisible:c,onPopoverVisibilityChange:g,onValueSheetVisibilityStateChange:b}}function q(a){var b=a.disabled,d=a.viewerHasDownvoted,e=a.viewerHasUpvoted;a=a.voteScoreRaw;return a==null||a<=0?null:k.jsx("span",{className:c("stylex")(o.score,!b&&(e||d)?o.scoreVoted:o.scoreNeutral),"data-testid":void 0,children:c("intlSummarizeNumber")(a)})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.asDownvote,e=a.asUpvote;a=a.disabled;var f,g;e?(f=d("fbicon")._(i("1905122"),12),g="ufi-comment-reputation-system-vote-action-link-upvoted-icon"):b?(f=d("fbicon")._(i("1949345"),12),g="ufi-comment-reputation-system-vote-action-link-downvoted-icon"):(f=d("fbicon")._(i("1949357"),12),g="ufi-comment-reputation-system-vote-action-link-neutral-icon");return k.jsx(c("TetraIcon.react"),{color:!a&&(e||b)?"highlight":"tertiary",icon:f,size:12,testid:void 0,xstyle:o.icon})}r.displayName=r.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometUFICommentReputationSystemVoteActionLinkStrategy.react",["CometRelay","CometUFICommentReputationSystemVoteActionLink.react","CometUFICommentReputationSystemVoteActionLinkStrategy_strategy.graphql","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=d("react");function a(a){var e,f=a.isOptimistic,g=a.strategy;a=a.wrapperRenderStrategy;g=d("CometRelay").useFragment(h!==void 0?h:h=b("CometUFICommentReputationSystemVoteActionLinkStrategy_strategy.graphql"),g);g=g.comment;var j=null;((e=g.feedback)==null?void 0:(e=e.associated_group)==null?void 0:e.comment_voting_state)==="COMMENT_VOTING_ENABLED"&&(j=i.jsx(c("CometUFICommentReputationSystemVoteActionLink.react"),{comment:g,disabled:f}));return a(j)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);